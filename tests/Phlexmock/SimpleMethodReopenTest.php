<?php 
namespace PhlexMock;

use PHPUnit_Framework_TestCase as TestCase;

class SimpleMethodReopenTest extends TestCase 
{
    private $phlexmock;

    public function setUp()
    {
        $this->phlexmock = new \PhlexMock\PhlexMock();
        $this->phlexmock->setClassSearchPaths([__DIR__."/../TestClass"]);
        $this->phlexmock->start();
    }

    public function testCustomMethodOutput()
    {
        $obj = new \TestClass\Shape();
        $this->assertEquals($obj->info(), "This is a Shape Class");

        \TestClass\Shape::phlexmockMethod('info', function(){
            return "This is the custom Shape Info";
        });

        $this->assertEquals($obj->info(), "This is the custom Shape Info");
    }

    public function testThisKeyword()
    {
        \TestClass\Shape::phlexmockMethod('setX', function($x){
            $this->x = $x;
        });

        \TestClass\Shape::phlexmockMethod('getX', function(){
            return $this->x;
        });

        $obj = new \TestClass\Shape();
        $obj->setX(3);
        $this->assertEquals($obj->getX(), 3);
    }

    public function testSelfKeyword()
    {
        \TestClass\Shape::phlexmockMethod('setValue', function($value){
            self::$value = $value;
        });

        \TestClass\Shape::phlexmockMethod('getValue', function(){
            return self::$value;
        });

        $obj = new \TestClass\Shape();
        $obj->setValue(10);
        $this->assertEquals($obj->getValue(), 10);
    }
}
